    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0f172a">
    <title>Momentum MAX</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        /* --- APP ENGINE CSS --- */
        :root { --primary: #6366f1; --accent: #ec4899; }
        
        * {
            font-family: 'Plus Jakarta Sans', sans-serif;
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
            user-select: none;
            touch-action: manipulation;
        }
        
        [dir="rtl"] * { font-family: 'Tajawal', sans-serif; }

        body {
            background-color: #0f172a; /* Slate 900 */
            color: white;
            overscroll-behavior: none;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* ANIMATIONS */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pulse-glow { 0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(99, 102, 241, 0); } 100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); } }

        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-slide { animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        .animate-fade { animation: fadeIn 1s ease-out; }
        .pulse-btn { animation: pulse-glow 2s infinite; }

        /* UI COMPONENTS */
        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .input-box {
            background: transparent;
            border: none;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            color: white;
            border-radius: 0;
            transition: 0.3s;
        }
        .input-box:focus { outline: none; border-color: var(--primary); }

        .blob { position: fixed; filter: blur(90px); z-index: -1; opacity: 0.4; }
        .blob-1 { top: -10%; left: -10%; width: 300px; height: 300px; background: #4f46e5; animation: float 8s infinite; }
        .blob-2 { bottom: -10%; right: -10%; width: 300px; height: 300px; background: #db2777; animation: float 10s infinite reverse; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. DATA & TRANSLATIONS ---
        const LANG = {
            en: {
                welcome: "Welcome to Momentum",
                subtitle: "The ultimate system for high performers.",
                selectLang: "Select Language",
                continue: "Continue",
                whatsName: "What should we call you?",
                namePlaceholder: "Your Name",
                goalTitle: "What is your main focus?",
                goals: [
                    { id: 'fit', icon: 'üí™', label: 'Get Fit', desc: 'Build muscle & health' },
                    { id: 'focus', icon: 'üß†', label: 'Deep Focus', desc: 'Increase productivity' },
                    { id: 'calm', icon: 'üßò', label: 'Inner Peace', desc: 'Reduce anxiety & stress' },
                    { id: 'wealth', icon: 'üí∞', label: 'Build Wealth', desc: 'Financial habits' }
                ],
                paywallTitle: "Unlock Your Potential",
                paywallSub: "Join the top 1% of users.",
                features: ["Unlimited Habits", "AI Coach", "Dark Mode", "Cloud Sync"],
                free: "Free Plan",
                max: "Momentum MAX",
                startTrial: "Start 7-Day Free Trial",
                restore: "Restore Purchase",
                setup: "Setting up your profile..."
            },
            ar: {
                welcome: "ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ŸÖŸàŸÖŸÜÿ™ŸÖ",
                subtitle: "ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ™ŸÉÿßŸÖŸÑ ŸÑŸÑÿ£ÿØÿßÿ° ÿßŸÑÿπÿßŸÑŸä.",
                selectLang: "ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©",
                continue: "ŸÖÿ™ÿßÿ®ÿπÿ©",
                whatsName: "ŸÖÿß ŸáŸà ÿßÿ≥ŸÖŸÉÿü",
                namePlaceholder: "ÿßÿ≥ŸÖŸÉ",
                goalTitle: "ŸÖÿß ŸáŸà ÿ™ÿ±ŸÉŸäÿ≤ŸÉ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿü",
                goals: [
                    { id: 'fit', icon: 'üí™', label: 'ŸÑŸäÿßŸÇÿ© ÿ®ÿØŸÜŸäÿ©', desc: 'ÿ®ŸÜÿßÿ° ÿßŸÑÿπÿ∂ŸÑÿßÿ™ ŸàÿßŸÑÿµÿ≠ÿ©' },
                    { id: 'focus', icon: 'üß†', label: 'ÿßŸÑÿ™ÿ±ŸÉŸäÿ≤ ÿßŸÑÿπŸÖŸäŸÇ', desc: 'ÿ≤ŸäÿßÿØÿ© ÿßŸÑÿ•ŸÜÿ™ÿßÿ¨Ÿäÿ©' },
                    { id: 'calm', icon: 'üßò', label: 'ÿßŸÑÿ≥ŸÑÿßŸÖ ÿßŸÑÿØÿßÿÆŸÑŸä', desc: 'ÿ™ŸÇŸÑŸäŸÑ ÿßŸÑÿ™Ÿàÿ™ÿ± ŸàÿßŸÑŸÇŸÑŸÇ' },
                    { id: 'wealth', icon: 'üí∞', label: 'ÿ®ŸÜÿßÿ° ÿßŸÑÿ´ÿ±Ÿàÿ©', desc: 'ÿπÿßÿØÿßÿ™ ŸÖÿßŸÑŸäÿ©' }
                ],
                paywallTitle: "ÿ£ÿ∑ŸÑŸÇ ÿßŸÑÿπŸÜÿßŸÜ ŸÑŸÇÿØÿ±ÿßÿ™ŸÉ",
                paywallSub: "ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿµŸÅŸàÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ.",
                features: ["ÿπÿßÿØÿßÿ™ ÿ∫Ÿäÿ± ŸÖÿ≠ÿØŸàÿØÿ©", "ÿßŸÑŸÖÿØÿ±ÿ® ÿßŸÑÿ∞ŸÉŸä", "ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä", "ŸÖÿ≤ÿßŸÖŸÜÿ© ÿ≥ÿ≠ÿßÿ®Ÿäÿ©"],
                free: "ÿßŸÑÿÆÿ∑ÿ© ÿßŸÑŸÖÿ¨ÿßŸÜŸäÿ©",
                max: "ŸÖŸàŸÖŸÜÿ™ŸÖ ŸÖÿßŸÉÿ≥",
                startTrial: "ÿßÿ®ÿØÿ£ ÿ™ÿ¨ÿ±ÿ®ÿ© ŸÖÿ¨ÿßŸÜŸäÿ© 7 ÿ£ŸäÿßŸÖ",
                restore: "ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™",
                setup: "ÿ¨ÿßÿ±Ÿä ÿ•ÿπÿØÿßÿØ ŸÖŸÑŸÅŸÉ..."
            }
        };

        // --- 2. AUDIO SYSTEM ---
        const Sound = {
            play: (type) => {
                try {
                    const ctx = new (window.AudioContext || window.webkitAudioContext)();
                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();
                    osc.connect(gain); gain.connect(ctx.destination);
                    const now = ctx.currentTime;
                    if (type === 'tap') {
                        osc.frequency.setValueAtTime(600, now);
                        gain.gain.setValueAtTime(0.05, now);
                        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
                        osc.start(now); osc.stop(now + 0.1);
                    } else if (type === 'success') {
                        [400, 600].forEach((f, i) => {
                            const o = ctx.createOscillator(); const g = ctx.createGain();
                            o.connect(g); g.connect(ctx.destination);
                            o.frequency.value = f;
                            g.gain.setValueAtTime(0.1, now + i*0.1);
                            g.gain.linearRampToValueAtTime(0.001, now + i*0.1 + 0.3);
                            o.start(now + i*0.1); o.stop(now + i*0.1 + 0.3);
                        });
                    }
                } catch (e) {}
            }
        };

        // --- 3. STORAGE ---
        const storage = {
            save: (data) => localStorage.setItem('momentum_v5', JSON.stringify(data)),
            load: () => JSON.parse(localStorage.getItem('momentum_v5')) || null
        };

        // --- 4. MAIN COMPONENT ---
        function App() {
            const [step, setStep] = useState(0); // 0:Lang, 1:Name, 2:Goals, 3:Paywall, 4:Done
            const [data, setData] = useState({ lang: 'en', name: '', goal: null, isPro: false });
            
            // Check if user already exists
            useEffect(() => {
                const existing = storage.load();
                if (existing) {
                    // In Part 2, we will render the Dashboard here.
                    // For now, we show a "Welcome Back" screen.
                    setData(existing);
                    setStep(5); 
                }
            }, []);

            const t = LANG[data.lang];
            const isRTL = data.lang === 'ar';

            const next = () => {
                Sound.play('tap');
                setStep(s => s + 1);
            };

            const finish = (isPro) => {
                Sound.play('success');
                const finalData = { ...data, isPro, joined: new Date() };
                storage.save(finalData);
                setData(finalData);
                setStep(5); // Go to "Dashboard" placeholder
            };

            // --- RENDER STEPS ---

            // STEP 0: LANGUAGE
            if (step === 0) return (
                <div className="h-screen flex flex-col items-center justify-center p-6 text-center animate-fade">
                    <div className="blob blob-1"></div><div className="blob blob-2"></div>
                    <div className="text-6xl mb-6 animate-float">üåç</div>
                    <h1 className="text-3xl font-bold mb-8">Select Language</h1>
                    <div className="space-y-4 w-full max-w-xs">
                        <button onClick={() => { setData({...data, lang:'en'}); next(); }} className="w-full glass-card p-4 rounded-2xl font-bold text-lg hover:bg-white/10 transition">üá∫üá∏ English</button>
                        <button onClick={() => { setData({...data, lang:'ar'}); next(); }} className="w-full glass-card p-4 rounded-2xl font-bold text-lg hover:bg-white/10 transition">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
                    </div>
                </div>
            );

            // WRAPPER FOR NEXT STEPS
            return (
                <div dir={isRTL ? 'rtl' : 'ltr'} className="h-screen flex flex-col p-6 animate-slide">
                    <div className="blob blob-1"></div><div className="blob blob-2"></div>
                    
                    {/* PROGRESS BAR */}
                    <div className="w-full h-1 bg-white/10 rounded-full mb-8 mt-4">
                        <div className="h-full bg-indigo-500 rounded-full transition-all duration-500" style={{width: `${step * 25}%`}}></div>
                    </div>

                    {/* STEP 1: NAME */}
                    {step === 1 && (
                        <div className="flex-1 flex flex-col justify-center">
                            <h1 className="text-4xl font-bold mb-2">{t.welcome}</h1>
                            <p className="text-gray-400 mb-8">{t.whatsName}</p>
                            <input 
                                value={data.name}
                                onChange={(e) => setData({...data, name: e.target.value})}
                                placeholder={t.namePlaceholder}
                                className="input-box text-3xl pb-2 mb-8 w-full"
                                autoFocus
                            />
                            <button onClick={next} disabled={!data.name} className="w-full bg-indigo-600 p-4 rounded-2xl font-bold disabled:opacity-50 pulse-btn">{t.continue}</button>
                        </div>
                    )}

                    {/* STEP 2: GOALS */}
                    {step === 2 && (
                        <div className="flex-1 flex flex-col">
                            <h1 className="text-3xl font-bold mb-2">Hey, {data.name} üëã</h1>
                            <p className="text-gray-400 mb-6">{t.goalTitle}</p>
                            <div className="grid grid-cols-1 gap-3 mb-auto overflow-y-auto">
                                {t.goals.map(g => (
                                    <button key={g.id} onClick={() => { setData({...data, goal: g.id}); next(); }} className="glass-card p-4 rounded-2xl flex items-center gap-4 text-left hover:bg-white/10 transition active:scale-95">
                                        <div className="text-3xl">{g.icon}</div>
                                        <div>
                                            <div className="font-bold">{g.label}</div>
                                            <div className="text-xs text-gray-400">{g.desc}</div>
                                        </div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* STEP 3: PAYWALL */}
                    {step === 3 && (
                        <div className="flex-1 flex flex-col text-center justify-center relative">
                            <div className="absolute top-0 right-0 p-2 bg-yellow-500/20 text-yellow-300 text-xs font-bold rounded-lg border border-yellow-500/50">PRO</div>
                            <div className="text-6xl mb-4 animate-float">üíé</div>
                            <h1 className="text-3xl font-bold mb-2">{t.paywallTitle}</h1>
                            <p className="text-gray-400 mb-8">{t.paywallSub}</p>
                            
                            <div className="glass-card p-6 rounded-3xl mb-8 text-left space-y-3">
                                {t.features.map(f => (
                                    <div key={f} className="flex items-center gap-3">
                                        <div className="text-green-400">‚úì</div>
                                        <div className="font-medium">{f}</div>
                                    </div>
                                ))}
                            </div>

                            <button onClick={() => finish(true)} className="w-full bg-gradient-to-r from-indigo-500 to-pink-500 p-4 rounded-2xl font-bold shadow-lg pulse-btn mb-3">
                                {t.startTrial}
                            </button>
                            <button onClick={() => finish(false)} className="text-sm text-gray-500 font-bold">{t.free}</button>
                        </div>
                    )}

                    {/* STEP 4: LOADING / DASHBOARD PREP */}
                    {step === 5 && (
                        <div className="h-full flex flex-col items-center justify-center">
                            <div className="w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-6"></div>
                            <h2 className="text-xl font-bold animate-pulse">{t.setup}</h2>
                            <p className="text-gray-500 mt-2 text-sm">Part 2 (Dashboard) Loading...</p>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
